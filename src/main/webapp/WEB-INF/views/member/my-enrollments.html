<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:insert="~{fragments :: common-head}"></div>
    <title>HealthHub@UTM : My Enrollments</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background-color: #f6f8fb; 
            padding: 20px; 
        }
        .container-custom { 
            max-width: 1200px; 
            margin: 0 auto; 
        }
        h1 { 
            text-align: center; 
            color: #17477c; 
            margin-bottom: 5px; 
            font-weight: 700;
        }
        .subtitle { 
            text-align: center; 
            color: #6c757d; 
            margin-bottom: 40px; 
        }
        .enrollment-card {
            background-color: #ffffff;
            border-left: 5px solid #007bff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            padding: 20px;
        }
        .program-title {
            font-size: 1.4em;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }
        .status-badge {
            font-weight: bold;
            padding: 0.5em 0.8em;
            border-radius: 5px;
            font-size: 0.85em;
        }
    </style>
</head>
<body>

    <div th:replace="~{fragments :: main-menu}"></div>
    
    <div class="container mt-4">
        <div th:replace="~{fragments :: flash-messages}"></div>

        <div class="container-custom">
            <h1>My Program Enrollments</h1>
            <p class="subtitle">A list of all programs you have joined, along with their status and payment details.</p>

            <div th:if="${enrollments == null or enrollments.isEmpty()}" class="alert alert-info text-center">
                You are not currently enrolled in any program. 
                <a th:href="@{/member/enroll-form}">Click here to explore and enroll in a program!</a>
            </div>

            <div th:unless="${enrollments == null or enrollments.isEmpty()}">
                <div th:each="enrollment : ${enrollments}" class="enrollment-card">
                    <div class="row align-items-center">
                        
                        <div class="col-md-5">
                            <div class="program-title" 
                                 th:text="${enrollment.program.name}">
                                Program Name
                            </div>
                            <p class="text-muted" 
                               th:text="${enrollment.program.description}">
                                Short description of the program.
                            </p>
                        </div>
                        
                        <div class="col-md-4">
                            <p class="mb-1">
                                Enrollment Date: 
                                <strong th:text="${#temporals.format(enrollment.enrollmentDate, 'dd-MMM-yyyy')}">
                                    10-Dec-2025
                                </strong>
                            </p>
                            <p class="mb-1">
                                Start Date: 
                                <strong th:text="${enrollment.startDate != null ? #temporals.format(enrollment.startDate, 'dd-MMM-yyyy') : 'TBD'}">
                                    17-Dec-2025
                                </strong>
                            </p>
                            <p class="mb-1">
                                End Date: 
                                <strong th:text="${enrollment.endDate != null ? #temporals.format(enrollment.endDate, 'dd-MMM-yyyy') : 'N/A'}">
                                    N/A
                                </strong>
                            </p>
                        </div>

                        <div class="col-md-3 text-end">
                            <p class="mb-2">
                                Program Status: 
                                <span class="status-badge text-white"
                                    th:classappend="${enrollment.status == 'Active' ? 'bg-success' : enrollment.status == 'Completed' ? 'bg-primary' : 'bg-danger'}" 
                                    th:text="${enrollment.status}">
                                    Active
                                </span>
                            </p>
                            <p class="mb-2">
                                Payment Status: 
                                <span class="status-badge text-dark"
                                    th:classappend="${enrollment.paymentStatus == 'Paid' ? 'bg-info' : 'bg-warning'}" 
                                    th:text="${enrollment.paymentStatus}">
                                    Pending
                                </span>
                            </p>
                            <p class="mb-0 price">
                                Amount Paid: 
                                <strong class="text-success" 
                                        th:text="'RM ' + ${#numbers.formatDecimal(enrollment.amountPaid, 1, 2)}">
                                    RM 250.00
                                </strong>
                            </p>
                        </div>
                    </div>
                    
                    <div th:if="${enrollment.notes != null and enrollment.notes != ''}" class="mt-3 pt-3 border-top">
                        <small class="text-muted">Notes: <span th:text="${enrollment.notes}">Trainer notes here.</span></small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>